<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Nh·∫Øn g·ª≠i y√™u th∆∞∆°ng</title>
    <link rel="icon" href="./icon1.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Playpen+Sans:wght@100..800&display=swap" rel="stylesheet">
    <style>
        .spinner {
            border: 8px solid #f3f3f3;
            border-top: 8px solid #ff7094;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1.2s linear infinite;
            margin-bottom: 15px;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .loading-text::after {
            content: '';
            display: inline-block;
            animation: dots 1.5s steps(3, end) infinite;
        }

        @keyframes dots {

            0%,
            20% {
                content: '';
            }

            40% {
                content: '.';
            }

            60% {
                content: '..';
            }

            80%,
            100% {
                content: '...';
            }
        }
    </style>
</head>

<body>
    <div id="loading-screen">
        <div class="spinner"></div>
        <div id="loading-text">Loading</div>
    </div>
    <canvas id="Canva"></canvas>
    <div id="ui">
        <h1>G·ª≠i l·ªùi nh·∫Øn</h1>
        <label>Th√™m l·ªùi nh·∫Øn (m·ªói c√¢u m·ªôt d√≤ng):</label><br />
        <textarea id="inputText">Anh y√™u em
Anh nh·ªõ em
‚ù§</textarea><br />

        <label>Th√™m link ·∫£nh (nh·∫≠p t·ªëi ƒëa 3-5 ·∫£nh):</label><br />
        <label for="upload-imgbb" class="custom-upload-button">üì∑ Upload ·∫£nh</label>
        <input type="file" id="upload-imgbb" accept="image/*" multiple hidden><br />

        <textarea id="imageLinks"></textarea><br />

        <label>Ch·ªçn nh·∫°c:</label>
        <select id="musicSelector">
            <option value="">-- Kh√¥ng ch·ªçn --</option>
            <option value="./music/p.mp3">Ph√©p m√†u</option>
            <option value="./music/e.mp3">L·ªÖ ƒë∆∞·ªùng</option>
            <option value="./music/d.mp3">K·ªµ sƒ© v√† √°nh sao</option>
            <option value="./music/s.mp3">C√≥ ch·∫Øc y√™u l√† ƒë√¢y</option>
        </select><br />

        <div id="buttonContainer">
            <button id="startBtn">T·∫°o link</button>
            <button id="qrBtn">T·∫°o QR</button>
        </div>

        <div id="donateQR" style="display: none; margin-top: 10px; text-align: center;">
            <p>ƒêang t·∫°o link...</p>
        </div>

        <a id="shareLink" target="_blank" title="Click ƒë·ªÉ m·ªü link trong tab m·ªõi"></a>
        <button id="donateBtn">
            Donate
        </button>

        <div id="donateModal" style="display:none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
  background: rgba(0,0,0,0.5); justify-content: center; align-items: center; z-index: 1000;">

            <div
                style="background: white; border-radius: 12px; padding: 20px; width: 300px; position: relative; text-align: center;">
                <button id="closeDonateModal"
                    style="position: absolute; top: 8px; right: 12px; background: transparent; border: none; font-size: 22px; cursor: pointer;">
                    &times;
                </button>
                <p style="font-weight: bold; margin-bottom: 15px; color: #ff7094;">Qu√©t m√£ QR ƒë·ªÉ ·ªßng h·ªô m√¨nh:</p>
                <img id="donateQRImg" src="https://files.catbox.moe/gt5se9.png" alt="QR Donate"
                    style="width: 180px; height: 180px; border-radius: 12px; border: 1px solid #ccc;" />
                <p style="font-weight: bold; margin-bottom: 15px; color: #ff7094;">C·∫£m ∆°n b·∫°n ƒë√£ ·ªßng h·ªô</p>
            </div>
        </div>

        <div class="heart-frame" style="display:none; margin-top:10px;">
            <canvas id="finalCanvas" width="300" height="296"></canvas>
            <!-- <div class="info-text">Click ·∫£nh ƒë·ªÉ t·∫£i v·ªÅ</div> -->
            <button id="downloadBtn" class="info-text">T·∫£i ·∫£nh QR</button>
            <img id="downloadPreview" style="display:none; width:100%; margin-top:10px;" />
        </div>
    </div>
    <div id="captcha-popup">
        <div>
            <h3>Vui l√≤ng nh·∫≠p CAPTCHA</h3>
            <div style="margin:15px 0; display: flex; align-items: center; gap: 10px;">
                <span id="captcha-code"></span>
                <button id="refresh-captcha" title="L√†m m·ªõi CAPTCHA">üîÑ</button>
            </div>
            <input type="text" id="captcha-input" placeholder="Nh·∫≠p m√£ x√°c th·ª±c.." autocomplete="off" />
            <div id="captcha-error"></div>
            <button id="captcha-submit">X√°c nh·∫≠n</button>
        </div>
    </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
    <script src="./script.js"></script>
    <script>
        const loadingText = document.getElementById("loading-text");
        let dots = 0;

        const loadingInterval = setInterval(() => {
            dots = (dots + 1) % 4;
            loadingText.textContent = "Loading" + ".".repeat(dots);
        }, 250);

        window.addEventListener("load", () => {
            setTimeout(() => {
                clearInterval(loadingInterval);
                document.getElementById("loading-screen").style.display = "none";
                document.getElementById("main-content").style.display = "block";
            }, 500);
        });

    </script>
</body>


</html>


